# Simulations

In the 2021-22 season, Maryland guard Shyanne Sellers took 101 three point attempts and made 32 of them for a .317 shooting percentage. A few weeks into the next season, she was 5 for 20 -- a paltry .20.

Is something wrong or is this just bad luck?

Luck is something that comes up a lot in sports. Is a team unlucky? Or a player? One way we can get to this, we can get to that is by simulating things based on their typical percentages. Simulations work by choosing random values within a range based on a distribution. The most common distribution is the normal or binomial distribution. The normal distribution is where the most cases appear around the mean, 66 percent of cases are within one standard deviation from the mean, and the further away from the mean you get, the more rare things become.

```{r, echo=FALSE}
knitr::include_graphics(rep("images/simulations2.png"))
```

Let's simulate 20 three point attempts 1000 times with his season long shooting percentage and see if this could just be random chance or something else.

We do this using a base R function called `rbinom` or binomial distribution. So what that means is there's a normally distributed chance that Shyanne Sellers is going to shoot above and below her career three point shooting percentage. If we randomly assign values in that distribution 1000 times, how many times will it come up 5, like this example?

```{r}
set.seed(1234)

simulations <- rbinom(n = 1000, size = 20, prob = .317)

table(simulations)
```

How do we read this? The first row and the second row form a pair. The top row is the number of shots made. The number immediately under it is the number of simulations where that occurred.

```{r, echo=FALSE}
knitr::include_graphics(rep("images/simulations1.png"))
```

So what we see is given her season-long shooting percentage, it's not out of the realm of randomness that with just 20 attempts for Sellers, she's only hit 5. In 1000 simulations, it comes up 174 times. Is she below where she should be? Yes. Will she likely improve and soon? Unless something is very wrong, yes. And indeed, by the end of the season, she finished with a .347 shooting percentage from 3 point range. So we can say she was just unlucky.

## Cold streaks

During the final regular-season game in the 2021-22 season, Maryland's men's team, shooting .326 on the season from behind the arc, went 1-15 in the first half. How strange is that?

```{r}
set.seed(1234)

simulations <- rbinom(n = 1000, size = 15, prob = .326)

hist(simulations)

table(simulations)
```

Short answer: Pretty weird, but not totally unheard of. If you simulate 15 threes 1000 times, about 17 times it will result in a single made three-pointer. It's slightly more common that the team would hit 9 threes out of 15. So going that cold is not totally out of the realm of random chance, but it's pretty rare.

## Streaky streaks

In his freshman season, Maryland lacrosse player Brandon Erksa scored 26 goals, third-most on the team, and had a scoring percentage of .377. Early in the year he didn't score in four consecutive games. How likely is that? To do this, we'll use the same approach as before but with a twist:

```{r}
set.seed(1234)

simulations <- rbinom(n = 1000, size = 1, prob = .377)

four_in_a_row <- mean(simulations == 1 & lead(simulations, 1) == 1 & lead(simulations, 2) == 1 & lead(simulations, 3) == 1)

odds <- 1/four_in_a_row
```

Let's parse that code. We set up our simulations as usual, with one change: the size is 1, so we're just seeing if the thing happens or not. And then, using `lead()` we can check if it does happen four times in a row in any of our simulations.

If the odds are 50, that means it's "1 to 50 against" - something that's not likely to happen very often at all. Another way of saying that is there's a 1 in 51 chance of it happening. It's possible that Erksa has a repeat streak like that, but I wouldn't count on it.